\documentclass[a4paper,11pt]{tubsreprt}
\usepackage[utf8x]{inputenc}
% \usepackage[T1]{fontenc}
% \usepackage{ae}
% \usepackage[a4paper]{tubsdoc}

\usepackage{scrpage2}
\usepackage{amsmath}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{listings}
\lstset{basicstyle=\ttfamily}
\usepackage[colorlinks=true]{hyperref}
\usepackage[ngerman]{babel}

%opening
\title{Das CorporateDesign in \LaTeX}
\subtitle{Anleitung und Dokumentation}
\author{Enrico Jörns}
\publishers{Institut fuer Lorem Ipsum} % to logo?


\makeatletter
\providecommand\marg[1]{%
  {\ttfamily\char`\{}\meta{#1}{\ttfamily\char`\}}}
\providecommand\oarg[1]{%
  {\ttfamily[}\meta{#1}{\ttfamily]}}
\def\cmd#1{\cs{\expandafter\cmd@to@cs\string#1}}
\def\cmd@to@cs#1#2{\char\number`#2\relax}
\DeclareRobustCommand\cs[1]{\texttt{\char`\\#1}}

\newenvironment{Declaration}{%
%    \end{macrocode}
% \begin{macro}{\new@element}
%   Help macro to define new Declaration elements.
%    \begin{macrocode}
  \newcommand*{\new@element}[1]{%
    \expandafter\newcommand\expandafter*\csname X##1\endcsname{}%
    \expandafter\let\csname X##1\expandafter\endcsname
    \csname ##1\endcsname
    \expandafter\newcommand\expandafter*\csname new##1\endcsname[1]{%
%      \begingroup
%        \let\ensuremath\@firstofone
%        \let\textit\@firstofone
%        \lowercase{\def\@tempa{##1}}%
%        \pdfstringdef\@tempb{\label@base.\@tempa.####1}%
%        \xdef\@currentHref{\@tempb}%
%        \Hy@raisedlink{\hyper@anchorstart{\@currentHref}\hyper@anchorend}%
%        \label{desc:\label@base.\@tempa.####1}%
%      \endgroup
      \csname X##1\endcsname{####1}\ignorespaces
    }%
    \expandafter\let\csname ##1\expandafter\endcsname\csname new##1\endcsname
  }%
  \newcommand*{\new@xelement}[2]{%
    \expandafter\newcommand\expandafter*\csname X##1\endcsname{}%
    \expandafter\let\csname X##1\expandafter\endcsname
    \csname ##1\endcsname
    \expandafter\newcommand\expandafter*\csname new##1\endcsname[2]{%
%      \begingroup
%        \let\ensuremath\@firstofone
%        \let\textit\@firstofone
%        \lowercase{\def\@tempa{##1}}%
%        \pdfstringdef\@tempb{\label@base.\@tempa.####1.####2}%
%        \xdef\@currentHref{\@tempb}%
%        \Hy@raisedlink{\hyper@anchorstart{\@currentHref}\hyper@anchorend}%
%        \label{desc:\label@base.\@tempa.####1.####2}%
%      \endgroup
      \csname X##1\endcsname{####1}{##2{####2}}\ignorespaces
    }%
    \expandafter\let\csname ##1\expandafter\endcsname\csname new##1\endcsname
  }%
%    \end{macrocode}
%    \begin{macrocode}
  \new@element{Option}%
  \new@element{Macro}%
  \new@element{Environment}%
  \new@element{Counter}%
  \new@element{FloatStyle}%
  \new@element{PLength}%
  \new@element{Variable}%
  \new@xelement{OptionValue}{\PValue}%
%    \end{macrocode}
% \end{macro}
%    \begin{macrocode}
  \ifvmode\else\par\fi\addvspace{2\baselineskip}%
  \vspace{-\baselineskip}%
  \vspace{\z@ plus \baselineskip}%
  \noindent
  \start@Declaration
  \tabular{|l|}\hline\ignorespaces
}{%
  \\\hline\endtabular\nobreak\after@Declaration\nobreak\par\nobreak
  \vspace{1.5\baselineskip}\nobreak\vspace{-\baselineskip}\nobreak%
  \vspace{0pt minus .5\baselineskip}\nobreak%
  \aftergroup\@afterindentfalse\aftergroup\@afterheading
}
\newcommand*{\start@Declaration}{\hspace{-1em}}
\newcommand*{\after@Declaration}{}
% \begin{macro}{\Macro}
% \begin{macro}{\Option}
% \begin{macro}{\KOption}
% \begin{macro}{\OptionValue}
% \begin{macro}{\Environment}
% \begin{macro}{\Counter}
% \begin{macro}{\Length}
% \begin{macro}{\PLength}
% \begin{macro}{\FloatStyle}
% \begin{macro}{\Pagestyle}
% \begin{macro}{\Variable}
% \begin{macro}{\FontElement}
% \begin{macro}{\PName}
% \begin{macro}{\PValue}
% \begin{macro}{\Parameter}
% \begin{macro}{\OParameter}
% \begin{macro}{\AParameter}
% \begin{macro}{\PParameter}
% \begin{macro}{\POParameter}
%   \begin{description}
%   \item[\cs{Macro}] \LaTeX{} or \TeX{} macro
%   \item[\cs{Option}] class or package option
%   \item[\cs{KOption}] |\KOMAoptions| option
%   \item[\cs{Environment}] \LaTeX{} environment
%   \item[\cs{Counter}] \LaTeX{} counter
%   \item[\cs{Length}] \LaTeX{} length
%   \item[\cs{PLength}] \KOMAScript{} pseudo length
%   \item[\cs{Variable}] \KOMAScript{} variable
%   \item[\cs{FontElement}] \KOMAScript{} element that has its own font
%     selection
%   \item[\cs{PName}] name of a parameter of a macro or environment
%   \item[\cs{PValue}] value of a parameter of a macro or environment
%   \item[\cs{Parameter}] the mandatory parameter of a macro or environment
%   \item[\cs{OParameter}] the optional parameter of a macro or environment
%   \item[\cs{AParameter}] the alternativ parameter of a macro or environment
%   \item[\cs{PParameter}] the part-of-command parameter of a macro or
%     environment
%   \end{description}
%    \begin{macrocode}
\DeclareRobustCommand*{\Macro}[1]{\mbox{\texttt{\char`\\#1}}}
\DeclareRobustCommand*{\Option}[1]{\mbox{\texttt{#1}}}
\DeclareRobustCommand*{\KOption}[1]{\mbox{\Option{#1}\texttt=}}
\DeclareRobustCommand*{\OptionValue}[2]{\mbox{\texttt{#1=#2}}}
\DeclareRobustCommand*{\FloatStyle}[1]{\mbox{\texttt{#1}}}
\DeclareRobustCommand*{\Pagestyle}[1]{\mbox{\texttt{#1}}}
\DeclareRobustCommand*{\Environment}[1]{\mbox{\texttt{#1}}}
\DeclareRobustCommand*{\Counter}[1]{\mbox{\texttt{#1}}}
\DeclareRobustCommand*{\Length}[1]{\mbox{\texttt{\char`\\#1}}}
\DeclareRobustCommand*{\PLength}[1]{\mbox{\PValue{#1}}}
\DeclareRobustCommand*{\Variable}[1]{\mbox{\PValue{#1}}}
\DeclareRobustCommand*{\FontElement}[1]{\PValue{#1}}
\DeclareRobustCommand*{\PName}[1]{\texttt{\textit{#1}}}
\DeclareRobustCommand*{\PValue}[1]{\texttt{#1}}
\DeclareRobustCommand*{\Parameter}[1]{\texttt{\{}\PName{#1}\texttt{\}}}
\DeclareRobustCommand*{\OParameter}[1]{%
  \texttt{[%]
  }\PName{#1}\texttt{%[
    ]}}
\DeclareRobustCommand*{\AParameter}[1]{%
  \texttt{(%)
  }\PName{#1}\texttt{%(
    )}}
\DeclareRobustCommand*{\PParameter}[1]{\texttt{\{#1\}}}
\DeclareRobustCommand*{\POParameter}[1]{\texttt{[#1]}}
%    \end{macrocode}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% \end{macro}
% NOTE: taken from scrguide.cls
\makeatother

\newcommand{\tubslatex}{\emph{tubslatex}}

\def\example{\par\smallskip\noindent\textit{Beispiel: }}

% Schreibt 'Beispiel vor den folgenden Inhalt und rückt alles nach dem ersten
% Absatz um 2em ein.
\newenvironment{Example}{%
\begingroup
\leftskip2em
\par\smallskip\noindent\hspace*{-2em}\textit{Beispiel: }
}{%
\par\endgroup
}

\begin{document}

\maketitle
\pagestyle{scrheadings}
\tableofcontents


\newcommand{\newdocumentclass}[1]{\textcolor{tuRed}{\lstinline{#1}}}

\chapter{Schnellstart}

\paragraph{Dokumente}
Die schnellste Methode ein Dokument im Corporate Design zu erstellen ist
das Laden einer der zur Verfügung stehenden Dokumentenklassen.
Für die Erstellung von Textdokumenten sind dies \newdocumentclass{tubsartcl},
\newdocumentclass{tubsreprt} und \newdocumentclass{tubsbook}.

\paragraph{Poster}
Die Klasse \newdocumentclass{tubsposter} kann zum Erstellen von Postern verwendet werden.
% tubsflyer?

\paragraph{Papierformat}
Die zu verwendende Papierformat sollte dabei als optionales Argument mit
übergeben werden. Für ein Dokument in DIN A4 ist dies \texttt{a4paper}.
Zur Verfügung stehen alle Papierformate A0 bis A6.

Standardmäßig wird die Titelseite in Dokumenten einfach mit dem Logo und einer
roten Trennlinie zwischen Kommunikations- und Absenderbereich versehen.

\paragraph{Präsentationen}
Um Präsentation zu erstellen existiert ein Style für \LaTeX-Beamer.
Dieser wird einfach mit \lstinline!\usetheme{tubs}! geladen.


\chapter{Dokumente}

Einfache Textdokumente können mit den Klassen \newdocumentclass{tubsartcl},
\newdocumentclass{tubsreprt} und \newdocumentclass{tubsbook} erstellt werden.

% \section{Bindekorrektur und Marginalen}

Da Dokumente normalerweise gedruckt werden und ggf. auch gebunden, werden
sie standardmäßig mit einer kleinen Bindekorrektur gesetzt, sodass das
Logo beim Drucken oder Abheften nicht abgeschnitten wird.
Diese Bindekorrektur kann mittels der Paketoption \texttt{bcor} angepasst werden.
Mit \texttt{bcor=0mm} wird sie beispielsweise deaktiviert.



\section{Titelseite}

Titelseiten können bei \LaTeX\ generell auf zwei verschiedene Arten erstellt
werden; entweder mit Hilfe des Befehls \lstinline{\maketitle} oder mit
der Umgebung \lstinline{titlepage}. Beide Varianten werden von tubslatex
unterstützt und leicht modifiziert.

\begin{Declaration}
  \Macro{maketitle}\OParameter{style}
\end{Declaration}

Die einfache Verwendung von \lstinline{\maketitle} erzeugt eine Titelseite
mit dem TU-Logo und einer roten Trennline zwischen Absender- und
Kommunikationsbereich.

Mit Hilfe des optionalen Arguements \PName{style} kann die Darstellung
der Titelseite geändert werden, indem aus einer Reihe vordefinierter Styles
ausgewählt wird.\bigskip

Neben den standardmäßig definierten Elementen für Haupttitelseiten werden
in \tubslatex noch ein paar zusätzliche Definiert.

\begin{Declaration}
  \Macro{logo}\Parameter{logo}\\
  \Macro{titlepicture}\Parameter{file}\\
  \Macro{titleabstract}\Parameter{text}
\end{Declaration}

\Macro{logo} dient zur Darstellung eines zusäzlichen Absenders als Schrift
oder Bild. Es wird in allen Stilen im Absenderbereich auf der dem
TU-Logo gegenüberliegenden Seite dargestellt.
Mit \Macro{titlepicture} kann eine Bilddatei angegeben werden, die bei
Verwendung eines entsprechenden Styles auf der Titelseite dargestellt werden.
\Macro{titeabstract} erlaubt die Darstellung eines kurzen zusammenfassenden
Textes auf der Titelseite, sofern der gewählte Stil dies unterstützt.

\begin{Declaration}
  \XMacro{begin}\PParameter{\Environment{titlepage}}\\
  \quad\dots\\
  \XMacro{end}\PParameter{titlepage}
\end{Declaration}

Mit der \Environment{titlepage}-Umgebung können, wie von den Standardklassen
gewohnt, Titelseiten definiert werden.
% TODO: \showtubslogo  etc.

\begin{Declaration}
  \XMacro{begin}\PParameter{\Environment{titlerow}}%
    \OParameter{options}%
    \Parameter{gaussheight}\\
  \quad\dots\\
  \XMacro{end}\PParameter{titlerow}
\end{Declaration}

Die Umgebung \Environment{titlerow} erlaubt es dabei, die Titelelemente im 
Gaußraster anzulegen. Der Parameter \PName{gaussheight} gibt dabei
die Höhe des jeweiligen Elements in Segmenten an. Die Position der Elemente
ergibt sich aus der Reihenfolge der Definition.
Mit dem optionalen Parameter \PName{options} können Einstellung wie die Hintergrundfarbe oder ein Hintergrundbild übergeben werden.

\subsection{Vordefiniert Titel-Styles}

Es sind 3 einfache Styles vordefiniert.

\begin{center}
  \fboxsep0mm
  \begin{minipage}[t]{0.33\textwidth}
    \centering\sffamily
    \fbox{%
      \includegraphics[width=0.95\textwidth]{examples/article1.pdf}}
    [default]
  \end{minipage}%
  \begin{minipage}[t]{0.33\textwidth}
    \centering\sffamily
    \fbox{%
      \includegraphics[width=0.95\textwidth]{examples/titlestyle_image.pdf}}
    [image]
  \end{minipage}%
  \begin{minipage}[t]{0.33\textwidth}
    \centering\sffamily
    \fbox{%
      \includegraphics[width=0.95\textwidth]{examples/titlestyle_imagetext.pdf}}
    [imagetext]
  \end{minipage}

\end{center}

\section{Kopf-/ Fußzeile}

Standardmäßig wird die Fußzeile komplett leer gelassen und die Kopfzeile
wird mit Seitennumer rechts und Kapitelname links gesetzt. Bei zweiseitigem
Layout gilt dies für die ungeraden Seiten, gerade seiten werden entsprechend
mit Seitennumer linksund Kapitelname rechts gesetzt.

\begin{Declaration}
  \Macro{ihead}\Parameter{innen}\\
  \Macro{ohead}\Parameter{außen}
\end{Declaration}

Bei Bedarf können die Kopfzeilen individuell angepasst werden.
Dies geschieht mit den Befehlen \Macro{ihead} und \Macro{ohead}, welche
auf den gleichnamigen Kommandos aus dem Koma-Skript aufbauen und für eine
korrekte vertikale Positionierung sorgen.

\begin{Declaration}
  \Macro{headsepline}
\end{Declaration}


Die standardmäßig gesetzten kurzen Linien am jeweils oberen äußeren Ende des
Kopfbereiches sind im Makro \Macro{headsepline} definiert.
Dies kann bei Bedarf überschrieben werden.


% \noindent\hspace*{-\parindent}\fbox{\cmd{\maketitle}\oarg{asdf}\marg{asdf}}
\chapter{Plakate}

Plakate werden mit Hilfe der Klasse \newdocumentclass{tubsposter} erstellt.
Dabei kann Mittels der Option \texttt{style} zwischen der Darstellung als
normales Poster oder als wissenschaftliches Poster gewählt werden.

\section{Veranstaltunplakate}

\begin{Declaration}
  \XMacro{begin}\PParameter{\Environment{tubsposter}}%
    \OParameter{options}\\
  \quad\dots\\
  \XMacro{end}\PParameter{tubsposter}
\end{Declaration}

Ein neues Plakat wird mit der Umgebung \Environment{tubsposter} erstellt.
Der optionale Parameter \PName{options} akzeptiert dabei die
unter \ref{} beschriebenen Optionen.

\section{Wissenschaftliche Plakate}

\begin{Declaration}
  \XMacro{begin}\PParameter{\Environment{tubsposter}}%
    \OParameter{options}%
    \Parameter{rows}\\
  \quad\dots\\
  \XMacro{end}\PParameter{tubsposter}
\end{Declaration}

Für die Erstellung von wissenschafltichen Plakaten wird ebenfalls die Umgebung
\Environment{tubsposter} verwendet, welche in diesem Fall jedoch einen
zusätzlichen Parameter \PName{rows} erwartet.
Damit wird die Anzahl an Modulzeilen bestimmt. Dies geschieht mittels
einer kommagetrennten Liste, wobei jedes Element entweder eine Länge
oder der Buchstabe 'X' sein kann. Eine Länge legt die Höhe der jeweiligen
Modulzeile genau fest, ein X sorgt dafür, dass alle mit X gekennzeichneten
Zeilen den restlichen zur Verfügung stehenden Platz gleichmäßig untereinander
auteilen. Dieses Vorgehen ist an die Tabellen-Umgebun \Environment{tabularx}
angelehnt.

\begin{Example}
  \noindent\Macro{begin}\PParameter{\Environment{tubsposter}}
    \Parameter{3cm,X,5cm,X}\par
  \noindent Erzeugt 4 Modulzeilen, wobei die 1. 3cm und die 3. 5cm hoch sind.
  Die Zeilen 2 und 4 nehmen den Restlichen verfügbaren Platz ein
  und sind gleich hoch.
\end{Example}


\begin{Declaration}
  \XMacro{begin}\PParameter{\Environment{posterrow}}%
    \OParameter{cols}\\%
  \quad\dots\\
  \XMacro{end}\PParameter{posterrow}\\
  \XMacro{begin}\PParameter{\Environment{posterrow*}}%
    \OParameter{cols}\\%
  \quad\dots\\
  \XMacro{end}\PParameter{posterrow*}
\end{Declaration}

Die mit \Environment{tubsposter} angelegten Modulzeilen können nun jeweils mit
der Umgebung \Environment{posterrow} mit Inhalt gefüllt werden.
Dabei kann entweder direkt der gewünschte Inhalt geschrieben oder das optionale
Parameter \PName{cols} benutzt werden.
Dieses erlaubt die Definition zusätzlicher Spalten in der aktuellen Modulzeile.
Es wird wieder ein kommagetrennte Liste erwartet,
deren Elemente dieselebe Bedeutung haben wie bereits beschrieben, außer, dass
sie die Breite und nicht die Höhe definieren.

Der normale Abstand des Inhalts vom Rand der Modulbox beträgt halbe
Rahmenbreite. Für das Einfügen von Bildern etwa kann es sinnvoll sein,
diesen Rahmen wegzulassen. Dies geschieht mit der Sternchen-Variante
\Environment{posterrow*}.


\begin{Declaration}
  \XMacro{begin}\PParameter{\Environment{postercol}}%
    \OParameter{rows}\\%
  \quad\dots\\
  \XMacro{end}\PParameter{postercol}\\
  \XMacro{begin}\PParameter{\Environment{postercol*}}%
    \OParameter{rows}\\%
  \quad\dots\\
  \XMacro{end}\PParameter{postercol*}
\end{Declaration}

Die mit \Environment{posterrow} angelegten Spalten können jeweils mit 
\Environment{postercol} mit Inhalt gefüllt oder in neue Unterzeilen aufgeteilt 
werden.

\begin{Declaration}
  \XMacro{begin}\PParameter{\Environment{postersubrow}}\\%
  \quad\dots\\
  \XMacro{end}\PParameter{postersubrow}\\
  \XMacro{begin}\PParameter{\Environment{postersubrow*}}\\%
  \quad\dots\\
  \XMacro{end}\PParameter{postersubrow*}
\end{Declaration}

Die mit \Environment{postercol} angelegten Unterzeilen können jeweils mit 
\Environment{postercol} mit Inhalt gefüllt werden.

\begin{Example}

\end{Example}


\section{Format}

\section{Farben}

\section{Befehle}

\section{Optionen}


\chapter{Briefe}


\chapter{Präsentationen}

\end{document}
